<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>node.js  &middot; Roy Tang</title>
  <link rel="authorization_endpoint" href="https://indieauth.com/auth" />
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
    
  <link rel="micropub" href="https://apps.roytang.net/blog/micropub">   
  
    
  <link rel="microsub" href="https://aperture.p3k.io/microsub/521">   
  
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="Roy Tang&#39;s blog. Programmer, engineer, scientist, critic, gamer, dreamer, and kid-at-heart. Randomly amazed." />

<meta name="keywords" content="">


<meta property="og:title" content="node.js  &middot; Roy Tang ">
<meta property="og:site_name" content="Roy Tang"/>
<meta property="og:url" content="https://mirror.roytang.net/tags/node.js/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="website" />



<link href='https://mirror.roytang.net/tags/node.js/index.xml' rel="alternate" type="application/rss+xml" title="node.js" />
<link href='' rel="alternate" type="application/json" title="node.js JSON Feed" />
<link href='' rel="feed" type="application/html" title="node.js H-Feed" />

<link rel="canonical" href="https://mirror.roytang.net/tags/node.js/" />

<link href="https://mirror.roytang.net/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.72.0" />

  <link rel="stylesheet" href="https://mirror.roytang.net/css/shared.css" type="text/css" />
  <link rel="stylesheet" href="https://mirror.roytang.net/css/main.css" type="text/css" title="Default" />
  <link rel="alternate stylesheet" href="https://mirror.roytang.net/css/plain.css" type="text/css" title="Plain" />
</head>
<body class="taxonomy">
    <div class="wrapper">
        <header class="mainheader h-card vcard about-author">
    <img class="u-photo" src="https://roytang.net/img/profile.jpg" alt="" />
    <div>
        <a style="display: none" href=https://mirror.roytang.net class="p-name u-url url author metatag" rel="me">
            Roy Tang
        </a>
        <p class="u-email" style="display:none">hello@roytang.net</p>
        <h1><a class="baselink" href="https://mirror.roytang.net">
        Roy Tang
        </a></h1>
        <p class="p-note">Programmer, engineer, scientist, critic, gamer, dreamer, and kid-at-heart.</p>
    </div>
</header>
<div class="secondheader">
    <form class="searchform" action="https://apps.roytang.net/blog/search" role="search" _lpchecked="1">
    <div class="searchflex">
        <input id="searchterm" name="q" class="searchbox" size="15" aria-label="search this site" placeholder="search">
        <input id="submit" type="image" title="Search" alt="Search" src="https://mirror.roytang.net/img/search.png">
    </div>
</form>

</div>
<div class="panel">
    
    <a href="https://mirror.roytang.net/blog/">Blog</a>
    
    <a href="https://mirror.roytang.net/notes/">Notes</a>
    
    <a href="https://mirror.roytang.net/photos/">Photos</a>
    
    <a href="https://mirror.roytang.net/links/">Links</a>
    
    <a href="https://mirror.roytang.net/archives/">Archives</a>
    
    <a href="https://mirror.roytang.net/about/">About</a>
    
</div>

        <div class="main_content">

<div class="main">

  <section class="h-feed">
    <a class="u-url" href="https://mirror.roytang.net/tags/node.js/"></a>
    <p class="p-name">All entries tagged node.js.</p>
    <p>You can subscribe to an <a href="https://mirror.roytang.net/tags/node.js/index.xml">RSS feed</a> of this list.</p>
    
<h3>Dec 2017</h3>
<ul class="entry_list">

    <li>
<article class="list_item notes h-entry">
    

    
<div class="content e-content">

<p>I have a query using MarkLogic node.js that basically boils down to something like this:</p>
<pre><code>db.documents.query(qb.where(qb.collection('test'))).stream()
.on('data', function(row) {
    console.log(&quot;Stream on data&quot;);
})
.on('end', function() {
    console.log(&quot;Stream on end&quot;);
})
.on('error', function(error) {
    console.log(error);
})
;
</code></pre>
<p>Now, for a certain collection we have in our database, the &lsquo;end&rsquo; function doesn&rsquo;t fire, i.e. I never see &ldquo;Stream on end&rdquo; appear in the log. There&rsquo;s no error or anything, processing just stops. It&rsquo;s only for this particular collection, other collections seem fine.</p>
<p>If I query documents in that collection directly using other methods such as qb.value() without using qb.collection(), the end event fires correctly. But once I add qb.collection() into the mix (using qb.and), the end event doesn&rsquo;t fire.</p>
<p>I&rsquo;m unsure how to debug this, as this is my first time trying to use streams in the nodejs client library. Any advice as to what I can check?</p>
<p>Thanks!</p>



<div class="image-list">







</div>
</div>

    <div class="meta">
    Posted by <a rel="author" class="p-author h-card" href="https://roytang.net">Roy Tang</a> under <a href="https://mirror.roytang.net/notes">notes</a> at 
    <a href="https://mirror.roytang.net/2017/12/48011448/"><time class="dt-published" datetime="2017-12-28 17:04:03">28 Dec 2017 5:04pm</time></a>

    

<a class="tag p-category" href="https://mirror.roytang.net/tags/node.js">#node.js</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic">#marklogic</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/questions">#questions</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/stackoverflow">#stackoverflow</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/software-development">#software development</a>




    <br />
    
Also on: 

    <a rel="syndication" title="View on stackexchange" class='u-syndication' href="https://stackoverflow.com/questions/48011448/marklogic-node-js-stream-end-event-doesnt-fire-for-certain-collections" title="View on stackexchange">stackexchange</a>



    /
    
    
    
    <a href="https://mirror.roytang.net/2017/12/48011448/#header-comments">
        <svg class="svg-icon" viewBox="0 0 20 20" width="12" height="12">
            <path d="M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"></path>
        </svg>
        0</a>

    
    
</div>
</article>
</li>

</ul>


<h3>Oct 2017</h3>
<ul class="entry_list">

    <li>
<article class="list_item notes h-entry">
    

    
<div class="content e-content">

<p>I&rsquo;m trying out the Roxy deployer. The Roxy app was created using the default app-type. I setup a new ML 9 database, and I ran &ldquo;ml local bootstrap&rdquo; using the default ports (8040 and 8041)</p>
<p>Then I setup a node application. I tried the following (sample code from <a href="https://docs.marklogic.com/jsdoc/index.html">https://docs.marklogic.com/jsdoc/index.html</a>)</p>
<pre><code>var marklogic = require('marklogic');
var conn = {
    host: '192.168.33.10',  
    port: 8040,
    user: 'admin',
    password: 'admin',
    authType: 'DIGEST'
}

var db = marklogic.createDatabaseClient(conn);

db.createCollection(
  '/books',
  {author: 'Beryl Markham'},
  {author: 'WG Sebald'}
  )
.result(function(response) {
    console.log(JSON.stringify(response, null, 2));
  }, function (error) {
    console.log(JSON.stringify(error, null, 2));
  });
</code></pre>
<p>Running the script gave me an error like:</p>
<pre><code>$ node test.js
{
  &quot;message&quot;: &quot;write document list: cannot process response with 500 status&quot;,
  &quot;statusCode&quot;: 500,
  &quot;body&quot;: &quot;&lt;error:error xsi:schemaLocation=\&quot;http://marklogic.com/xdmp/error error.xsd\&quot; xmlns:error=\&quot;http://marklogic.com/xdmp/error\&quot; xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot;&gt;\n  &lt;error:code&gt;XDMP-IMPMODNS&lt;/error:code&gt;\n  &lt;error:name&gt;err:XQST0059&lt;/error:name&gt;\n  &lt;error:xquery-version&gt;1.0-ml&lt;/error:xquery-version&gt;\n  &lt;error:message&gt;Import module namespace mismatch&lt;/error:message&gt;\n  &lt;error:format-string&gt;XDMP-IMPMODNS: (err:XQST0059) Import module namespace http://marklogic.com/rest-api/endpoints/config does not match target namespace http://marklogic.com/rest-api/endpoints/config_DELETE_IF_UNUSED of imported module /MarkLogic/rest-api/endpoints/config.xqy&lt;/error:format-string&gt;\n  &lt;error:retryable&gt;false&lt;/error:retryable&gt;\n  &lt;error:expr/&gt;\n  &lt;error:data&gt;\n    &lt;error:datum&gt;http://marklogic.com/rest-api/endpoints/config&lt;/error:datum&gt;\n    &lt;error:datum&gt;http://marklogic.com/rest-api/endpoints/config_DELETE_IF_UNUSED&lt;/error:datum&gt;\n    &lt;error:datum&gt;/MarkLogic/rest-api/endpoints/config.xqy&lt;/error:datum&gt;\n  &lt;/error:data&gt;\n  &lt;error:stack&gt;\n    &lt;error:frame&gt;\n      &lt;error:uri&gt;/roxy/lib/rewriter-lib.xqy&lt;/error:uri&gt;\n      &lt;error:line&gt;5&lt;/error:line&gt;\n      &lt;error:column&gt;0&lt;/error:column&gt;\n      &lt;error:xquery-version&gt;1.0-ml&lt;/error:xquery-version&gt;\n    &lt;/error:frame&gt;\n  &lt;/error:stack&gt;\n&lt;/error:error&gt;\n&quot;
}
</code></pre>
<p>If I change the port to 8000 (the default appserver that inserts into Documents), the node function executes correctly as expected. I&rsquo;m not sure if I need to configure anything else with the Roxy-created appserver so that it works with the node.js application.</p>
<p>I&rsquo;m not sure where the &ldquo;DELETE_IF_UNUSED&rdquo; part in the error message is coming from either. There doesn&rsquo;t seem to be any such text in the configuration files generated by Roxy.</p>
<p>Edit: When accessing 192.168.33.10:8040 via the browser, I get a an xml with a similar error:</p>
<pre><code>&lt;error:error xsi:schemaLocation=&quot;http://marklogic.com/xdmp/error error.xsd&quot; xmlns:error=&quot;http://marklogic.com/xdmp/error&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  &lt;error:code&gt;XDMP-IMPMODNS&lt;/error:code&gt;
  &lt;error:name&gt;err:XQST0059&lt;/error:name&gt;
  &lt;error:xquery-version&gt;1.0-ml&lt;/error:xquery-version&gt;
  &lt;error:message&gt;Import module namespace mismatch&lt;/error:message&gt;
  &lt;error:format-string&gt;XDMP-IMPMODNS: (err:XQST0059) Import module namespace http://marklogic.com/rest-api/endpoints/config does not match target namespace http://marklogic.com/rest-api/endpoints/config_DELETE_IF_UNUSED of imported module /MarkLogic/rest-api/endpoints/config.xqy&lt;/error:format-string&gt;
  &lt;error:retryable&gt;false&lt;/error:retryable&gt;
  &lt;error:expr/&gt;
  &lt;error:data&gt;
    &lt;error:datum&gt;http://marklogic.com/rest-api/endpoints/config&lt;/error:datum&gt;
    &lt;error:datum&gt;http://marklogic.com/rest-api/endpoints/config_DELETE_IF_UNUSED&lt;/error:datum&gt;
    &lt;error:datum&gt;/MarkLogic/rest-api/endpoints/config.xqy&lt;/error:datum&gt;
  &lt;/error:data&gt;
  &lt;error:stack&gt;
    &lt;error:frame&gt;
      &lt;error:uri&gt;/roxy/lib/rewriter-lib.xqy&lt;/error:uri&gt;
      &lt;error:line&gt;5&lt;/error:line&gt;
      &lt;error:column&gt;0&lt;/error:column&gt;
      &lt;error:xquery-version&gt;1.0-ml&lt;/error:xquery-version&gt;
    &lt;/error:frame&gt;
  &lt;/error:stack&gt;
&lt;/error:error&gt;
</code></pre>
<p>If it matters, MarkLogic version is 9.0-3.1. It&rsquo;s a fresh install too.</p>
<p>Any advice?</p>



<div class="image-list">







</div>
</div>

    <div class="meta">
    Posted by <a rel="author" class="p-author h-card" href="https://roytang.net">Roy Tang</a> under <a href="https://mirror.roytang.net/notes">notes</a> at 
    <a href="https://mirror.roytang.net/2017/10/47018820/"><time class="dt-published" datetime="2017-10-30 15:22:49">30 Oct 2017 3:22pm</time></a>

    

<a class="tag p-category" href="https://mirror.roytang.net/tags/node.js">#node.js</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic">#marklogic</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic-9">#marklogic-9</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/roxy">#roxy</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/questions">#questions</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/stackoverflow">#stackoverflow</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/software-development">#software development</a>




    <br />
    
Also on: 

    <a rel="syndication" title="View on stackexchange" class='u-syndication' href="https://stackoverflow.com/questions/47018820/marklogic-9-roxy-cant-connect-to-created-database-using-node-js" title="View on stackexchange">stackexchange</a>



    /
    
    
    
    <a href="https://mirror.roytang.net/2017/10/47018820/#header-comments">
        <svg class="svg-icon" viewBox="0 0 20 20" width="12" height="12">
            <path d="M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"></path>
        </svg>
        3</a>

    
    
</div>
</article>
</li>

</ul>


<h3>Jun 2017</h3>
<ul class="entry_list">

    <li>
<article class="list_item notes h-entry">
    

    
<div class="content e-content">

<p>Something similar to my question here: <a href="https://stackoverflow.com/questions/40715822/marklogic-node-js-api-group-by-and-sort-by-count">https://stackoverflow.com/questions/40715822/marklogic-node-js-api-group-by-and-sort-by-count</a></p>
<p>I have documents in Marklogic with fields <em>name</em> and <em>amount</em>. I want to get the total amount for each name. Basically in SQL it would be</p>
<pre><code>select name, sum(amount) from table group by name
</code></pre>
<p>I have <strong>range indexes</strong> for both <em>name</em> and <em>amount</em>.
For getting sum aggregates, the documentation suggests something like <strong>valuesBuilder.fromIndexes(&lsquo;amount&rsquo;).aggregates(&lsquo;sum&rsquo;)</strong>, but this only gets the sum for all records, instead of per name like I want.</p>
<p>Any advice?</p>



<div class="image-list">







</div>
</div>

    <div class="meta">
    Posted by <a rel="author" class="p-author h-card" href="https://roytang.net">Roy Tang</a> under <a href="https://mirror.roytang.net/notes">notes</a> at 
    <a href="https://mirror.roytang.net/2017/06/44621849/"><time class="dt-published" datetime="2017-06-19 03:27:09">19 Jun 2017 3:27am</time></a>

    

<a class="tag p-category" href="https://mirror.roytang.net/tags/node.js">#node.js</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic">#marklogic</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/questions">#questions</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/stackoverflow">#stackoverflow</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/software-development">#software development</a>




    <br />
    
Also on: 

    <a rel="syndication" title="View on stackexchange" class='u-syndication' href="https://stackoverflow.com/questions/44621849/marklogic-node-js-api-group-by-sum" title="View on stackexchange">stackexchange</a>



    /
    
    
    
    <a href="https://mirror.roytang.net/2017/06/44621849/#header-comments">
        <svg class="svg-icon" viewBox="0 0 20 20" width="12" height="12">
            <path d="M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"></path>
        </svg>
        4</a>

    
    
</div>
</article>
</li>

</ul>


<h3>Dec 2016</h3>
<ul class="entry_list">

    <li>
<article class="list_item notes h-entry">
    

    
<div class="content e-content">

<p>I tried to insert the following test document:</p>
<pre><code>db.documents.write(
    {
        uri: &quot;/test/doc1.json&quot;,
        contentType: &quot;application/json&quot;,
        collections: &quot;test&quot;,
        content: {
            name : &quot;Peter&quot;,
            hobby: &quot;Sleeping&quot;,
            other: &quot;Some other info&quot;,
            &quot;triple&quot;: {
                &quot;subject&quot;: {   
                    &quot;datatype&quot;: &quot;http://example.com/name/&quot;,  
                    &quot;value&quot;: &quot;Peter&quot;   
                },   
                &quot;predicate&quot;: {     
                    &quot;datatype&quot;: &quot;http://example.com/relation/&quot;,  
                    &quot;value&quot;: &quot;livesin&quot;   
                },   
                &quot;object&quot;: {     
                    &quot;datatype&quot;: &quot;http://example.com/location/&quot;,  
                    &quot;value&quot;: &quot;Paris&quot;   
                }
          	}
        }
    }
  ).
  result(function(response){
    console.log(&quot;Done loading&quot;);
  }); 
</code></pre>
<p>Then I queried as follows:</p>
<pre><code>var query = [
  'SELECT ?s ?p ?o' ,
  'WHERE { ?s ?p ?o }' ,
];
db.graphs.sparql('application/sparql-results+json', query.join('\n')
).result(function (result) {
  console.log(JSON.stringify(result, null, 2));
}, function(error) {
  console.log(JSON.stringify(error, null, 2));
});
</code></pre>
<p>The results showed me the values of the triple, but what if I also want to get the entire document where the triple was embedded? Is it also possible to filter by other fields in the document?</p>



<div class="image-list">







</div>
</div>

    <div class="meta">
    Posted by <a rel="author" class="p-author h-card" href="https://roytang.net">Roy Tang</a> under <a href="https://mirror.roytang.net/notes">notes</a> at 
    <a href="https://mirror.roytang.net/2016/12/40968519/"><time class="dt-published" datetime="2016-12-05 06:44:52">5 Dec 2016 6:44am</time></a>

    

<a class="tag p-category" href="https://mirror.roytang.net/tags/node.js">#node.js</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/sparql">#sparql</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic">#marklogic</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/questions">#questions</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/stackoverflow">#stackoverflow</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/software-development">#software development</a>




    <br />
    
Also on: 

    <a rel="syndication" title="View on stackexchange" class='u-syndication' href="https://stackoverflow.com/questions/40968519/marklogic-node-js-api-how-to-get-the-document-where-an-embedded-triple-lives" title="View on stackexchange">stackexchange</a>



    /
    
    
    
    <a href="https://mirror.roytang.net/2016/12/40968519/#header-comments">
        <svg class="svg-icon" viewBox="0 0 20 20" width="12" height="12">
            <path d="M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"></path>
        </svg>
        2</a>

    
    
</div>
</article>
</li>

</ul>


<h3>Nov 2016</h3>
<ul class="entry_list">

    <li>
<article class="list_item notes h-entry">
    

    
<div class="content e-content">

<p>I want to retrieve all documents in my MarkLogic db that have month=November and also group them by name, and get the count of records per name. I know I can get the frequency per name by using valuesBuilder with a range index on the name field, but how can I filter this result so that I only get the count of records for the month of November?</p>
<p>Supposedly valuesBuilder.fromIndexes().where() can do the filtering, but I don&rsquo;t know what to pass here and examples online seem to be sparse.</p>



<div class="image-list">







</div>
</div>

    <div class="meta">
    Posted by <a rel="author" class="p-author h-card" href="https://roytang.net">Roy Tang</a> under <a href="https://mirror.roytang.net/notes">notes</a> at 
    <a href="https://mirror.roytang.net/2016/11/40720684/"><time class="dt-published" datetime="2016-11-21 12:52:39">21 Nov 2016 12:52pm</time></a>

    

<a class="tag p-category" href="https://mirror.roytang.net/tags/node.js">#node.js</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic">#marklogic</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/questions">#questions</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/stackoverflow">#stackoverflow</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/software-development">#software development</a>




    <br />
    
Also on: 

    <a rel="syndication" title="View on stackexchange" class='u-syndication' href="https://stackoverflow.com/questions/40720684/marklogic-node-api-how-to-filter-the-results-from-a-valuesbuilder" title="View on stackexchange">stackexchange</a>



    /
    
    
    
    <a href="https://mirror.roytang.net/2016/11/40720684/#header-comments">
        <svg class="svg-icon" viewBox="0 0 20 20" width="12" height="12">
            <path d="M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"></path>
        </svg>
        1</a>

    
    
</div>
</article>
</li>

    <li>
<article class="list_item notes h-entry">
    

    
<div class="content e-content">

<p>In a relational db you&rsquo;d have something like &ldquo;select name, count(1) as c from mytable group by name order by c desc&rdquo;. Basically I want to count how many records contain each name value and get the ones with highest counts first.</p>
<p>Is there a way to do a similar thing in Marklogic using the Node.js API?</p>



<div class="image-list">







</div>
</div>

    <div class="meta">
    Posted by <a rel="author" class="p-author h-card" href="https://roytang.net">Roy Tang</a> under <a href="https://mirror.roytang.net/notes">notes</a> at 
    <a href="https://mirror.roytang.net/2016/11/40715822/"><time class="dt-published" datetime="2016-11-21 08:37:08">21 Nov 2016 8:37am</time></a>

    

<a class="tag p-category" href="https://mirror.roytang.net/tags/node.js">#node.js</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/marklogic">#marklogic</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/questions">#questions</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/stackoverflow">#stackoverflow</a>

<a class="tag p-category" href="https://mirror.roytang.net/tags/software-development">#software development</a>




    <br />
    
Also on: 

    <a rel="syndication" title="View on stackexchange" class='u-syndication' href="https://stackoverflow.com/questions/40715822/marklogic-node-js-api-group-by-and-sort-by-count" title="View on stackexchange">stackexchange</a>



    /
    
    
    
    <a href="https://mirror.roytang.net/2016/11/40715822/#header-comments">
        <svg class="svg-icon" viewBox="0 0 20 20" width="12" height="12">
            <path d="M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"></path>
        </svg>
        1</a>

    
    
</div>
</article>
</li>

</ul>






</section>

</div>
<div class="sidebar">
    <div class="menu">On This Site
    <ul>

    <li><a href="https://roytang.net/search">Search</a></li>

    <li><a href="https://roytang.net/random">Random</a></li>

    <li><a href="https://mirror.roytang.net/onthisday/">On This Day</a></li>

    <li><a href="https://mirror.roytang.net/albums/sketchbook/">Sketchbook</a></li>

    <li><a href="https://mirror.roytang.net/page/lists/reading/">Reading List</a></li>

    <li><a href="https://mirror.roytang.net/page/blogroll">Blogroll</a></li>

    <li><a href="https://mirror.roytang.net/quotes/">Quotes</a></li>

    <li><a href="https://mirror.roytang.net/page/stats/site/">Stats</a></li>

    <li><a href="https://mirror.roytang.net/page/about/contact">Contact</a></li>

</ul>
    </div>
    <div class="menu">Things I Write About
    <ul>

    <li><a href="https://mirror.roytang.net/tags/favorites/">Featured Posts</a></li>

    <li><a href="https://mirror.roytang.net/tags/weeknotes/">Weeknotes</a></li>

    <li><a href="https://mirror.roytang.net/tags/software-development/">Software Development</a></li>

    <li><a href="https://mirror.roytang.net/tags/mtg/">Magic the Gathering</a></li>

    <li><a href="https://mirror.roytang.net/tags/gaming/">Gaming</a></li>

    <li><a href="https://mirror.roytang.net/tags/movies/">Movies</a></li>

    <li><a href="https://mirror.roytang.net/tags/tv/">TV</a></li>

    <li><a href="https://mirror.roytang.net/tags/tech-life/">Tech Life</a></li>

    <li><a href="https://mirror.roytang.net/tags/philippines/">Philippines</a></li>

    <li><a href="https://mirror.roytang.net/tags/">View All</a></li>

</ul>
    </div>
    <div class="menu">Elsewhere
    <ul>

    <li><a href="https://twitter.com/roytang" rel="me">Twitter</a></li>

    <li><a href="https://mastodon.technology/@roytang" rel="me">Mastodon</a></li>

    <li><a href="https://twitch.tv/twitchyroy" rel="me">Twitch</a></li>

    <li><a href="https://www.linkedin.com/in/roytang" rel="me">LinkedIn</a></li>

    <li><a href="https://instagram.com/roytang0400" rel="me">Instagram</a></li>

    <li><a href="https://github.com/roytang" rel="me">Github</a></li>

    <li><a href="https://reddit.com/u/hungryroy" rel="me">Reddit</a></li>

    <li><a href="https://ko-fi.com/roytang" rel="me">Ko-fi</a></li>

</ul>
    </div>
    <div class="menu">Subscribe
    <ul>

    <li><a href="https://mirror.roytang.net/index.xml">Everything (RSS)</a></li>

    <li><a href="https://mirror.roytang.net/blog/index.xml">Blog (RSS)</a></li>

    <li><a href="https://mirror.roytang.net/notes/index.xml">Notes (RSS)</a></li>

    <li><a href="https://mirror.roytang.net/photos/index.xml">Photos (RSS)</a></li>

    <li><a href="https://mirror.roytang.net/links/index.xml">Links (RSS)</a></li>

</ul>
    </div>
</div>
</div>
<footer class="mainfooter">
    
        <p><p>Webrings:</p>
<ul>
<li><a href="https://xn--sr8hvo.ws/%F0%9F%8D%B3%F0%9F%91%AB%E2%9E%95/previous">←</a>🕸💍<a href="https://xn--sr8hvo.ws/%F0%9F%8D%B3%F0%9F%91%AB%E2%9E%95/next">→</a></li>
<li><a href='https://webring.xxiivv.com/#random' target='_blank'><img class='link' src='https://webring.xxiivv.com/icon.black.svg'/></a></li>
<li><strong>Geekring:</strong> <a href='http://geekring.net/site/91/previous'>Previous</a> :: <a href='http://geekring.net/site/91/random'>Random</a> :: <a href='http://geekring.net/site/91/next'>Next</a></li>
</ul>
</p>
    
    (c) 2002-2021 Roy Tang unless otherwise indicated.
    
    <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.</p>
    
    <p><small>Powered by <a href="https://github.com/roytang/blog/tree/master/themes/exhale">Exhale Hugo Theme</a></small>. 
        Last modified at: 2019 10 23 15:09:29.
        
    </p>
</footer>      


</div>
<script src="https://mirror.roytang.net/js/exhale.js"></script>
</body>
</html>

